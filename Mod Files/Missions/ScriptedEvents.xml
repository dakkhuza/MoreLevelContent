<Randomevents>
    <EventPrefabs>
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
        <!--                          Distress Events                                  -->
        <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

        <ScriptedEvent identifier="lostdiver1">
            <TagAction criteria="player" tag="player" _npos="-1074.8806,-325.59744" />
            <SpawnAction npcsetidentifier="mlc_distress_npcs" npcidentifier="lostdiver"
                lootingisstealing="true" targettag="lostdiver" spawnlocation="Outpost"
                team="FriendlyNPC" requirespawnpointtag="false" _npos="-144.09946,-323.67096" />
            <NPCWaitAction npctag="lostdiver" wait="true" _npos="319.75323,-496.50308" />
            <TriggerAction target1tag="player" target2tag="lostdiver" applytotarget1="saver"
                radius="100" disableincombat="true" disableiftargetincapacitated="false"
                waitforinteraction="true" _npos="704.88477,-316.44513" />
            <CheckAfflictionAction identifier="oxygenlow" targettag="lostdiver" minstrength="199"
                _npos="1339.8341,-332.7592">
                <Success>
                    <AfflictionAction affliction="oxygenlow" strength="200" targettag="lostdiver"
                        _npos="1763.7911,-594.7729" />
                    <ConversationAction
                        text="You flip the diver over to view their face. It's not a pretty sight. Clear signs of oxygen deprivation. You were simply too late."
                        waitforinteraction="false" endeventifinterrupted="false" dialogtype="Small"
                        _npos="2294.2312,-671.8799">
                        <Option text="Rest in Peace." />
                        <Option text="Loot the corpse." endconversation="true">
                            <RNGAction chance="0.25" _npos="2852.6274,-607.69354">
                                <Success>
                                    <MoneyAction amount="500" targettag="saver"
                                        _npos="3375.217,-813.6029" />
                                </Success>
                                <Failure>
                                    <ConversationAction
                                        text="As you fiddle with the divers suit to get at the good stuff, you notice a small flashing light attached to their belt."
                                        targettag="saver" endeventifinterrupted="false"
                                        dialogtype="Small" continueconversation="false"
                                        _npos="3530.6653,-636.6763">
                                        <Option text="Weird." endconversation="true">
                                            <MoneyAction amount="500" targettag="saver"
                                                _npos="3885.2026,-872.2832" />
                                            <WaitAction time="5" _npos="4113.1514,-616.8335" />
                                            <StatusEffectAction targettag="lostdiver"
                                                _npos="4516.0156,-616.4352">
                                                <statuseffect _npos="4851.7104,-715.6915">
                                                    <explosion range="500" stun="10" force="20"
                                                        penetration="0.5"
                                                        _npos="5290.799,-760.75055">
                                                        <sound
                                                            file="Content/Items/Weapons/ExplosionMedium1.ogg"
                                                            range="10000" selectionmode="All"
                                                            _npos="5537.749,-1038.1564" />
                                                        <Affliction identifier="explosiondamage"
                                                            strength="125" dividebylimbcount="true"
                                                            _npos="5756.9175,-792.6504" />
                                                        <Affliction identifier="bleeding"
                                                            strength="40" probability="0.05"
                                                            dividebylimbcount="false"
                                                            _npos="6149.251,-792.4969" />
                                                    </explosion>
                                                </statuseffect>
                                            </StatusEffectAction>
                                        </Option>
                                    </ConversationAction>
                                </Failure>
                            </RNGAction>
                        </Option>
                    </ConversationAction>
                </Success>
                <Failure>
                    <ConversationAction
                        text="The diver franticly gestures to their head with both hands. They then proceed to move both hand laterally away from their neck a few times. They make a gesture that seems to imply they'll follow you."
                        waitforinteraction="false" endeventifinterrupted="true" dialogtype="Small"
                        _npos="2028.1692,-121.134125" />
                    <NPCFollowAction npctag="lostdiver" targettag="saver"
                        _npos="2700.5818,-121.80908" />
                    <TagAction criteria="hullname:airlock" tag="airlock" submarinetype="Player"
                        _npos="3365.24,-121.979126" />
                    <TriggerAction target1tag="lostdiver" target2tag="airlock" radius="100"
                        disableiftargetincapacitated="true" _npos="4054.657,-121.5665" />
                    <WaitAction time="2" _npos="4576.804,-248.94394" />
                    <NPCFollowAction npctag="lostdiver" targettag="saver" follow="false"
                        abandononreset="true" _npos="5121.877,-248.02765" />
                    <ConversationAction
                        text="The diver takes their suit off. &quot;Thank god you found me, those asshole diving instructors left me behind! Someone forgot to put a battery in my headset, can you believe it? If I didn't know better, I'd say they wanted me dead, ha ha!&quot; "
                        speakertag="lostdiver" targettag="saver" waitforinteraction="false"
                        endeventifinterrupted="true" eventsprite="Stowaway2" dialogtype="Regular"
                        _npos="5793.403,-138.55582">
                        <Option text="And why'd they want you dead?">
                            <ConversationAction
                                text="They quiet down, before glancing around. &quot;Uh.. Look, you get me outta here and back to civilization and I'll uh, make it worth your time, ok?&quot;"
                                speakertag="lostdiver" targettag="saver" waitforinteraction="false"
                                eventsprite="Stowaway2" dialogtype="Regular"
                                continueconversation="true" _npos="6622.989,-138.0918">
                                <Option text="Whatever." endconversation="true">
                                    <MissionAction missionidentifier="lostdiver"
                                        _npos="7114.3,-460.72534" />
                                </Option>
                                <Option text="We're not going anywhere until you come clean."
                                    endconversation="true">
                                    <CombatAction combatmode="Offensive" isinstigator="true"
                                        npctag="lostdiver" enemytag="saver"
                                        _npos="7335.7734,-74.65413" />
                                </Option>
                            </ConversationAction>
                        </Option>
                        <Option text="We'll get you back safely." endconversation="true">
                            <MissionAction missionidentifier="lostdiver"
                                _npos="6324.9746,-488.68384" />
                        </Option>
                    </ConversationAction>
                </Failure>
            </CheckAfflictionAction>
        </ScriptedEvent>

        <ScriptedEvent identifier="distress_lostdiver_normal">
            <TagAction criteria="player" tag="player" _npos="-535.5,-243.5" />
            <TagAction criteria="humanprefabidentifier:lostdiver" tag="lostdiver"
                _npos="275.7937,-352.8971" />
            <TriggerAction target1tag="player" target2tag="lostdiver"
                applytotarget1="interactingplayer" disableincombat="true"
                disableiftargetincapacitated="true" waitforinteraction="true"
                _npos="731.20667,-842.21686" />
            <ConversationAction text="Thank god you're here! I'll follow you back to your sub."
                speakertag="lostdiver" waitforinteraction="false" endeventifinterrupted="true"
                dialogtype="Small" _npos="1166.833,-498.90417" />
            <NPCFollowAction npctag="lostdiver" targettag="interactingplayer" follow="true"
                abandononreset="true" _npos="1568.3126,-243.22638" />
            <Label name="followchoice" _npos="2138.4238,-460.29364" />
            <TriggerAction target1tag="interactingplayer" target2tag="lostdiver"
                disableincombat="true" waitforinteraction="true" _npos="2261.4292,-222.89523" />
            <ConversationAction text="Yes?" speakertag="lostdiver" targettag="interactingplayer"
                waitforinteraction="false" dialogtype="Small" _npos="2740.5896,-269.9847">
                <Option text="Stay Here" endconversation="true" />
                <Option text="Follow Me" endconversation="true">
                    <NPCFollowAction npctag="lostdiver" targettag="interactingplayer" follow="true"
                        abandononreset="false" _npos="3351.1301,-50.362762" />
                    <GoTo name="followchoice" _npos="3854.5889,-50.657593" />
                </Option>
            </ConversationAction>
            <NPCFollowAction npctag="lostdiver" targettag="interactingplayer" follow="false"
                _npos="3198.5842,-431.7013" />
            <NPCWaitAction npctag="lostdiver" wait="true" _npos="3603.9958,-325.29767" />
            <GoTo name="followchoice" _npos="4003.994,-323.34903" />
        </ScriptedEvent>

        <ScriptedEvent identifier="distress_ghostship_bandit_2">
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="banditleader"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
        </ScriptedEvent>

        <ScriptedEvent identifier="distress_ghostship_bandit_4_easy">
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="banditleader"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
        </ScriptedEvent>

        <ScriptedEvent identifier="distress_ghostship_bandit_5_hard">
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="bandit"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="banditleader"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
            <SpawnAction npcsetidentifier="abandonedoutpostnpcs" npcidentifier="banditleader_heavy"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
        </ScriptedEvent>

        <ScriptedEvent identifier="distress_ghostship_prisonbreak">
            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false"
                targettag="prisoner1" />

            <StatusEffectAction targettag="prisoner1">
                <StatusEffect>
                    <GiveTalentInfo giverandom="false"
                        talentidentifiers="swole, crustyseaman, stonewall" />
                </StatusEffect>
            </StatusEffectAction>

            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false"
                targettag="prisoner2" />
            <StatusEffectAction targettag="prisoner2">
                <StatusEffect>
                    <GiveTalentInfo giverandom="false"
                        talentidentifiers="swole, inordinateexsanguination, implacable" />
                </StatusEffect>
            </StatusEffectAction>


            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisonercrowbar"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false"
                targettag="prisoner3" />
            <StatusEffectAction targettag="prisoner3">
                <StatusEffect>
                    <GiveTalentInfo giverandom="false"
                        talentidentifiers="swole, phdinnuclearphysics, multifunctional" />
                </StatusEffect>
            </StatusEffectAction>


            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false"
                targettag="prisoner4" />
            <StatusEffectAction targettag="prisoner4">
                <StatusEffect>
                    <GiveTalentInfo giverandom="false"
                        talentidentifiers="swole, berserker, foolhardy" />
                </StatusEffect>
            </StatusEffectAction>

        </ScriptedEvent>

        <ScriptedEvent identifier="distress_ghostship_prisonbreak1">
            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />

            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />

            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />

            <SpawnAction npcsetidentifier="mlc_distress_corpses" npcidentifier="prisoner"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_ghostship"
                team="None" requirespawnpointtag="true" lootingisstealing="false" />
        </ScriptedEvent>


        <ScriptedEvent identifier="distress_ghostship_crawlernest">

            <SpawnAction itemidentifier="crawleregg" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_nest" requirespawnpointtag="true" />
            <SpawnAction speciesname="crawler" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_monster" requirespawnpointtag="true" />

            <SpawnAction itemidentifier="crawleregg" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_nest" requirespawnpointtag="true" />
            <SpawnAction speciesname="crawler" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_monster" requirespawnpointtag="true" />


            <SpawnAction itemidentifier="crawleregg" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_nest" requirespawnpointtag="true" />
            <SpawnAction speciesname="crawler" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_monster" requirespawnpointtag="true" />

            <SpawnAction itemidentifier="crawleregg" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_nest" requirespawnpointtag="true" />
            <SpawnAction speciesname="crawler" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_monster" requirespawnpointtag="true" />

            <SpawnAction itemidentifier="crawleregg" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_nest" requirespawnpointtag="true" />
            <SpawnAction itemidentifier="crawleregg" spawnlocation="Any"
                spawnpointtype="Enemy" spawnpointtag="distress_nest" requirespawnpointtag="true" />


        </ScriptedEvent>

        <ScriptedEvent identifier="distress_ghostship_fractal">
            <RNGAction chance="0.5">
                <Success>
                    <SpawnAction speciesname="Fractalguardian" spawnlocation="Any"
                        spawnpointtype="Enemy" spawnpointtag="distress_monster"
                        requirespawnpointtag="true" />

                </Success>
                <Failure>
                    <SpawnAction speciesname="Fractalguardian2" spawnlocation="Any"
                        spawnpointtype="Enemy" spawnpointtag="distress_monster"
                        requirespawnpointtag="true" />

                </Failure>
            </RNGAction>

        </ScriptedEvent>

        <ScriptedEvent identifier="shuttle_clown">
            <SpawnAction npcsetidentifier="outpostnpcs1" npcidentifier="clown"
                spawnlocation="Any" spawnpointtype="Human" spawnpointtag="distress_shuttle"
                team="None" requirespawnpointtag="true" lootingisstealing="false"
                targettag="clownnpc1" />
            <SpawnAction itemidentifier="toyhammer" targetinventory="clownnpc1" />
            <TagAction criteria="humanprefabidentifier:cuffedshuttlecaptain" tag="clownvictimnpc" />
            <SpawnAction itemidentifier="toyhammer" targetinventory="clownnpc1" />
            <CombatAction combatmode="offensive" npctag="clownnpc1" enemytag="clownvictimnpc"
                isinstigator="true" />

        </ScriptedEvent>

    </EventPrefabs>
</Randomevents>